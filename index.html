<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>BMGDollarsTech Hub</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
  body{background:#0b0b0b;color:#fff}

  .hero{
    min-height:100vh;
    background:linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)),url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f');
    background-size:cover;
    background-position:center;
    display:flex;
    flex-direction:column;
    justify-content:center;
    padding:0 60px;
    max-width:900px;
    margin:auto;
  }
  .hero h2{font-size:52px;line-height:1.2;margin-bottom:20px}
  .hero span{color:#f5c77a}
  .hero p{font-size:18px;color:#ddd;margin-bottom:30px}
  .hero-buttons a{
    display:inline-block;
    margin-right:15px;
    padding:14px 30px;
    border-radius:30px;
    text-decoration:none;
    font-weight:600;
  }
  .btn-primary{background:#f5c77a;color:#000}
  .btn-secondary{border:2px solid #f5c77a;color:#f5c77a}
  .btn-secondary:hover{background:#f5c77a;color:#000}

  .services-preview{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:20px;
    padding:40px 60px;
    background:#111;
  }
  .service-card{
    background:#1a1a1a;
    padding:25px;
    border-radius:15px;
    text-align:center;
  }
  .service-card i{font-size:30px;color:#f5c77a;margin-bottom:10px}
  .service-card h4{margin-bottom:8px}

  /* WhatsApp Floating Button */
  .whatsapp-float{
    position:fixed;
    bottom:25px;
    right:25px;
    background:#25d366;
    color:#fff;
    width:60px;
    height:60px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:30px;
    box-shadow:0 8px 20px rgba(0,0,0,0.4);
    z-index:1000;
    text-decoration:none;
  }
  .whatsapp-float:hover{background:#1ebe5d}

  /* AI Chatbot Floating Icon & Window */
  #chat-icon { position: fixed; bottom:100px; right:25px; width:60px; height:60px; cursor:pointer; z-index:10000; }
  #chat-icon img { width:100%; height:100%; border-radius:50%; box-shadow:0 4px 10px rgba(0,0,0,0.3); }

  #ai-chatbot {
    position: fixed; bottom:100px; right:25px; width:350px; max-width:90%; z-index:9999;
    border-radius: 15px; overflow: hidden; display:none; flex-direction:column;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3); font-family: Arial, sans-serif; animation:fadeIn 0.3s ease-in-out;
  }
  @keyframes fadeIn { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform: translateY(0); } }

  #chat-header { background:#007BFF; color:#fff; font-weight:bold; padding:12px; cursor:pointer; text-align:center; border-bottom:1px solid #0056b3; }
  #chat-body { background:#f9f9f9; height:300px; padding:12px; overflow-y:auto; display:flex; flex-direction:column; }
  .message { margin:6px 0; padding:10px 14px; border-radius:20px; max-width:75%; word-wrap:break-word; line-height:1.4; animation:slideIn 0.2s ease; }
  .message.user { background:#DCF8C6; align-self:flex-end; text-align:right; }
  .message.bot { background:#E2E2E2; align-self:flex-start; text-align:left; }
  @keyframes slideIn { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }

  .typing { width:40px; height:12px; background:#E2E2E2; border-radius:6px; margin:4px 0; align-self:flex-start; animation:blink 1s infinite; }
  @keyframes blink { 0%,100% {opacity:0.3;} 50%{opacity:1;} }

  #chat-input-container { display:flex; border-top:1px solid #ccc; background:#fff; }
  #chat-input { flex:1; border:none; padding:10px; font-size:14px; }
  #chat-input:focus { outline:none; }
  #chat-send { background:#007BFF; color:#fff; border:none; padding:0 15px; cursor:pointer; transition: background 0.2s; }
  #chat-send:hover { background:#0056b3; }

  @media(max-width:768px){ .hero{padding:0 20px} .hero h2{font-size:38px} .services-preview{padding:30px 20px} }
  @media(max-width:400px){ #ai-chatbot{width:90%; bottom:70px;} #chat-body{height:250px;} #chat-icon{bottom:70px; width:50px; height:50px;} }
</style>
</head>
<body>

<!-- Main Hero Section -->
<section class="hero">
  <h2>Your Oneâ€‘Stop <span>Digital & Lifestyle</span> Hub</h2>
  <p>Technology, Fashion, Cosmetics, Kinyozi & Salon â€” powered by innovation and quality service.</p>
  <div class="hero-buttons">
    <a href="services.html" class="btn-primary">Explore Services</a>
    <a href="shop.html" class="btn-secondary">Visit Shop</a>
  </div>
</section>

<!-- Services Preview -->
<section class="services-preview">
  <div class="service-card">
    <i class="fas fa-laptop-code"></i>
    <h4>Tech & AI</h4>
    <p>Modern tech solutions and AIâ€‘powered services.</p>
  </div>
  <div class="service-card">
    <i class="fas fa-tshirt"></i>
    <h4>Fashion</h4>
    <p>Trendy outfits and premium styles.</p>
  </div>
  <div class="service-card">
    <i class="fas fa-spray-can-sparkles"></i>
    <h4>Cosmetics</h4>
    <p>Beauty products that inspire confidence.</p>
  </div>
  <div class="service-card">
    <i class="fas fa-scissors"></i>
    <h4>Kinyozi & Salon</h4>
    <p>Professional grooming & beauty care.</p>
  </div>
</section>

<!-- WhatsApp Floating Button -->
<a href="https://wa.me/254700692492" class="whatsapp-float" target="_blank" aria-label="Chat on WhatsApp">
  <i class="fab fa-whatsapp"></i>
</a>

<!-- AI Chat Floating Icon -->
<div id="chat-icon">
  <img src="https://img.icons8.com/color/48/000000/chat--v1.png" alt="Chat" />
</div>

<!-- AI Chat Window -->
<div id="ai-chatbot">
  <div id="chat-header">Chat with us!</div>
  <div id="chat-body"></div>
  <div id="chat-input-container">
    <input id="chat-input" type="text" placeholder="Type your message..." />
    <button id="chat-send">Send</button>
  </div>
</div>

<script>
// Elements
const chatContainer = document.getElementById("ai-chatbot");
const chatHeader = document.getElementById("chat-header");
const chatBody = document.getElementById("chat-body");
const chatInput = document.getElementById("chat-input");
const chatSend = document.getElementById("chat-send");
const chatIcon = document.getElementById("chat-icon");

// Toggle chat visibility
chatIcon.onclick = () => { chatContainer.style.display = "flex"; chatIcon.style.display = "none"; }
chatHeader.onclick = () => { chatContainer.style.display = "none"; chatIcon.style.display = "block"; }

// Append message function
function appendMessage(text, sender){
  const msgDiv = document.createElement("div");
  msgDiv.className = "message " + sender;
  msgDiv.innerText = text;
  chatBody.appendChild(msgDiv);
  chatBody.scrollTop = chatBody.scrollHeight;
}

// Typing indicator
function showTyping(){ const typingDiv=document.createElement("div"); typingDiv.className="typing"; typingDiv.id="typing-indicator"; chatBody.appendChild(typingDiv); chatBody.scrollTop=chatBody.scrollHeight; }
function removeTyping(){ const typing=document.getElementById("typing-indicator"); if(typing) typing.remove(); }

// Send message
chatSend.onclick = async ()=>{
  const msg = chatInput.value.trim();
  if(!msg) return;
  appendMessage(msg,"user");
  chatInput.value='';
  try{
    showTyping();
    const res = await fetch('/chat',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({message:msg, userId:"user123"})
    });
    const data = await res.json();
    removeTyping();
    appendMessage(data.reply,"bot");
  } catch(err){
    removeTyping();
    appendMessage("Sorry, something went wrong.","bot");
  }
};

// Send on Enter
chatInput.addEventListener("keypress", function(e){ if(e.key==="Enter"){ chatSend.click(); e.preventDefault(); } });

// Auto-greeting once per session
window.addEventListener('load', () => {
  if(!sessionStorage.getItem('greeted')){
    chatContainer.style.display="flex";
    chatIcon.style.display="none";
    appendMessage("Hello! ðŸ‘‹ How can we help you today?", "bot");
    sessionStorage.setItem('greeted', 'true');
  }
});
</script>

</body>
</html>
